rules_version = '2';
service cloud.firestore {
    match /databases/{database}/documents {

        function isAuth() {
            return request.auth != null;
        }
        function isUserAuth(userId) {
            return request.auth != null && request.auth.uid == userId;
        }

        match /users/{userId} {
            allow get, create: if isAuth();
            allow update, delete: if isUserAuth(userId);
        }
        match /clients/{userId} {
            allow read, write: if isUserAuth(userId);
        }
    }
}
